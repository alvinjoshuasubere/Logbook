<!DOCTYPE html>
<html>

<head>
  <base target="_top">
  <link rel="stylesheet" href="style.css">
  <script>
    function submitForm() {
      const employeeID = document.getElementById('employeeID').value;

      const form = document.getElementById('form');
      const formData = new FormData(form);

      fetch(form.action, {
        method: 'POST',
        body: formData
      })
        .then(response => response.json())
        .then(data => {
          console.log(data)
          if (data.result === 'success') {
            console.log(data)
            document.getElementById('success').style.display = 'block';
            document.getElementById('danger').style.display = 'none';
            document.getElementById('success').innerText = data.message;
            setTimeout(() => {
              document.getElementById('success').style.display = 'none';
            }, 3000);
          } else {
            document.getElementById('danger').style.display = 'block';
            document.getElementById('success').style.display = 'none';
            document.getElementById('danger').innerText = data.message;

            setTimeout(() => {
              document.getElementById('danger').style.display = 'none';
            }, 3000);
          }
        })
        .catch(error => console.error('Error:', error));

      document.forms['form'].reset();
      document.getElementById("employeeID").focus();
    }
  </script>
</head>

<body>
  <div class="container">
    <form id="form"
      action="https://script.google.com/macros/s/AKfycbyRV23y0VMJhYHI3oALXK7s3_vHUSn3lSneJXoDJBY2GtyaHYOXlL81BImmjsDkAurP/exec"
      method="post" onsubmit="event.preventDefault(); submitForm();"> <br><br>

      <img src="logo.png" alt="Biotech logo" width="200" height="auto" class="center"><br>
      <h1 class="header">AIC LOGBOOK</h1>
      <h2 class="header">AUTOMATED SYSTEM</h2>
      <label class="version" for="owner">V 1.0.0</label><br>
      <img src="scan.gif" class="scan" alt="">

      <input autofocus class="inputs" type="number" id="employeeID" name="Employee ID" autocomplete="off"
        placeholder="Employee ID"><br>
      <input id="focusButton" type="submit" value="Submit" class="submit">
      <div class="message">
        <div class="success" id="success" style="display:none;"></div>
        <div class="danger" id="danger" style="display:none;"></div>
      </div>
      <small class="owner" for="owner">Â©2024 Biotech Farms Inc.</small>
    </form>
  </div>
</body>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const employeeIDInput = document.getElementById('employeeID');

    // Function to focus the input field
    const focusInput = () => {
      employeeIDInput.focus();
    };

    // Focus the input field immediately when the page loads
    focusInput();

    // Continuously ensure the input field has focus
    setInterval(focusInput, 100);
  });
</script>

</html>